# Test: Create Event and Log Sale
# Full flow: Dashboard → Create Event → Log Sale → Verify Stats
appId: host.exp.Exponent
---
- launchApp:
    clearState: true

# Skip onboarding if present
- runFlow:
    when:
      visible: "Track Every Sale"
    commands:
      - tapOn: "Skip"

# Verify Dashboard
- assertVisible: "Your Hustle"

# Create new event
- tapOn: "New Event"
- assertVisible: "Event Details"

# Fill in event details
- tapOn:
    text: "e.g., Farmers Market Downtown"
- inputText: "Test Market Event"

# Hide keyboard and fill other fields
- hideKeyboard
- scroll:
    direction: DOWN

# Tap on booth fee field
- tapOn:
    text: "0.00"
    index: 0
- inputText: "50"
- hideKeyboard

# Create the event
- scroll:
    direction: DOWN
- tapOn: "Create Event"

# Should be on Event Detail screen
- assertVisible: "Test Market Event"
- assertVisible: "No sales yet"

# Add a sale
- tapOn: "+ Add Sale"
- assertVisible: "Add Sale"

# Fill sale details
- tapOn:
    text: "e.g., Custom Candle"
- inputText: "Handmade Candle"
- hideKeyboard

- tapOn: 
    text: "0.00"
    index: 0
- inputText: "25"
- hideKeyboard

# Save the sale
- scroll:
    direction: DOWN
- tapOn: "Save Sale"

# Verify sale appears on event detail
- assertVisible: "Handmade Candle"
- assertVisible: "$25"
